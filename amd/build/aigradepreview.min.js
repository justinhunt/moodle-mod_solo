define(["exports","core/str","core/ajax","core/log","core/notification","core/templates"],(function(_exports,_str,_ajax,_log,_notification,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Question AI Text Edit Form Helper
   *
   * @module     mod_solo/aigradepreview
   * @copyright  2024 Justin Hunt <justin@poodll.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=_interopRequireDefault(_ajax),_log=_interopRequireDefault(_log),_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates);var Selectors={fields:{sampleanswer:"#",sampleanswereval:"#",feedbackscheme:"#",markscheme:"#",maxmarks:"#"}};_exports.init=props=>{var previewbtn=document.querySelector(props.previewbtnid);Selectors.fields.sampleanswer=props.sampleanswerid,Selectors.fields.sampleanswereval=props.sampleanswerevalid,Selectors.fields.feedbackscheme=props.feedbackschemeid,Selectors.fields.markscheme=props.markschemeid,Selectors.fields.region=props.regionid,Selectors.fields.targetlanguage=props.targetlanguageid,Selectors.fields.feedbacklanguage=props.feedbacklanguageid;var strings={};(0,_str.get_strings)([{key:"prompttester",component:"mod_solo"},{key:"sampleanswerempty",component:"mod_solo"}]).done((function(s){var i=0;strings.prompttester=s[i++],strings.sampleanswerempty=s[i++]})),_log.default.debug("addinge event listener to preview button"),previewbtn.addEventListener("click",(e=>{const form=e.target.closest("form"),sampleanswer=(form.querySelector(Selectors.fields.questiontext),form.querySelector(Selectors.fields.sampleanswer)),sampleanswereval=form.querySelector(Selectors.fields.sampleanswereval),feedbackscheme=form.querySelector(Selectors.fields.feedbackscheme),markscheme=form.querySelector(Selectors.fields.markscheme),region=form.querySelector(Selectors.fields.region),targetlanguage=form.querySelector(Selectors.fields.targetlanguage),feedbacklanguage=form.querySelector(Selectors.fields.feedbacklanguage);""!==sampleanswer.value?(sampleanswereval.innerHTML='<i class="icon fa fa-spinner fa-spin fa-2x" style="margin: auto; padding: 10px;"></i>',_log.default.debug("calling ajax"),_ajax.default.call([{methodname:"mod_solo_fetch_ai_grade",args:{region:region.value,targetlanguage:targetlanguage.value,questiontext:"",studentresponse:sampleanswer.value,markscheme:markscheme.value,maxmarks:100,feedbackscheme:feedbackscheme.value,feedbacklanguage:feedbacklanguage.value},async:!1}])[0].then((function(airesponse){_log.default.debug(airesponse),airesponse.correctedtext&&_templates.default.render("mod_solo/aigradepreview",airesponse).then((function(html,js){sampleanswereval.innerHTML=html}))}))):_notification.default.alert(strings.prompttester,strings.sampleanswerempty)}))}}));

//# sourceMappingURL=aigradepreview.min.js.map